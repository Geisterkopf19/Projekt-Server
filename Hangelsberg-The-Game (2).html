<script type="module">

    // import kaboom lib
    import kaboom from "https://unpkg.com/kaboom@3000.0.0-beta.5/dist/kaboom.mjs";

    kaboom({
        background: [0, 127, 70],
    })


    //Neue
    loadSprite("auto", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/auto.png")
    loadSprite("polizei_a", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/polizei-1.png", {
        sliceX: 3,
        anims: {
            "recht": 2,
            "links": 1,
        },
    })
    //end neue
    //Map
    loadSprite("Map-Button1", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Level1Buton.png")
    loadSprite("Map-Hintergrund", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/neue-map.png")
    loadSprite("rahmen", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/rahmen.png")
    loadSprite("eins", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/eins.png")
    loadSprite("zwei", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/zwei.png")
    loadSprite("drei", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/drei.png")
    //Hause
    loadSprite("Hause1", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(1).png")
    loadSprite("Hause2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(2).png")
    loadSprite("Hause3", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(3).png")
    loadSprite("Hause4", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(4).png")
    loadSprite("Hause5", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(5.png")
    loadSprite("Hause6", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(6).png")
    loadSprite("Hause7", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(7).png")
    loadSprite("Hause8", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Haus(8).png")
    //Zaun 
    loadSprite("Zaun2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/z1.png")
    loadSprite("Zaun", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Zaune-lang.png")
    //hintergrund
    loadSprite("Tanebaum", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/baum-tane.png")
    loadSprite("Grass", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Grass.png")
    //Renddeam
    loadSprite("wand", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/wand.png")
    loadSprite("Straße", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Straße.png")
    //Himmel
    loadSprite("Wolken", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/wolke.png")
    loadSprite("Himmel", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/bk.png")
    //schule
    loadSprite("Schule", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/schule.png")
    //Vogel
    loadSprite("Vogel", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Vogel.png", {
        sliceX: 7,
        anims: {
            "fly": { 
                from: 0,
                to: 6,
                speed: 9,
                loop: true,
            },
        },
    })
    //menu
    loadSprite("menu", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/menu.png")
    loadSprite("play", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/play.png")
    loadSprite("quit", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/quit.png")
    loadSprite("pausbk", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/pausbk.png")

    //Objekte
    loadSprite("schild_sprung", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/schild.png")
    loadSprite("glas-au", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Glas.png")
    loadSprite("car1", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/car1.png")
    loadSprite("car2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/car2.png")
    loadSprite("reifen", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/reifen.png")
    loadSprite("steine", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/steine.png")
    //mull
    loadSprite("Restmull", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Restm%C3%BCll-Tonne.png")
    loadSprite("Wertstoffe", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Wertstoffe-Tonne.png")
    loadSprite("Restmull2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Resam%C3%BClltone.png")
    loadSprite("Papier-mull", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Papierm%C3%BClltone.png")
    //Sport
    loadSprite("midi", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/midi-neue.png", {
        sliceX: 6,
        anims: {
            "spin": { 
                from: 0,
                to: 5,
                speed: 5,
                loop: true,
            },
        },
    })
    loadSprite("wand", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/wand.png")
    //Music
    loadSound("Level-1", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Music/Level-1.mp3")        
    loadSound("Level-2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Music/Level-2.mp3")        
    loadSound("Lobby-1", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Music/Lobby-1.mp3")        
    loadSound("Lobby-2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Music/Lobby-2.mp3")        
    loadSound("Bahnhof", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/Music/Bahnhof.mp3")        
    loadSprite("player", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/player.png", {
        sliceX: 10,
        anims: {
            "run": { 
                from: 0,
                to: 6,
                speed: 10,
                loop: true,
            },

            "idle": { 
                from: 7,
                to: 8,
                speed: 1,
                loop: true,
            },
            "jump": 9,
        },
    })
    //level2 
        loadSprite("level2bk", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/bklevel2.png")
        loadSprite("boden", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/boden6.png")
        // ball
            loadSprite("1", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/LV%202%20Tennis%20Tall.png")
            loadSprite("2", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/LV%202%20Rugby%20ball.png")
            loadSprite("3", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/LV%202%20Basketball.png")
    //boden
    loadSprite("bodenbig", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/bodenbig.png")
    loadSprite("bodensmall", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/bodensmall.png")
    loadSprite("halder", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/halder.png")
    //sprunge 
    loadSprite("Sprungbret", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/LV%202%20Sprungbret.png")
    loadSprite("Bock", "https://raw.githubusercontent.com/Geisterkopf19/Projekt-Server/main/LV%202%20Bock.png")
    var xx = 0
    var stop = false
    var Vogel_Timer = 0
    var eins = 1
    var lo = 0 
    var leben = 0 
    var MOVE_SPEED = 480
    var vogel_da = false
    var yend =  1300
    var jump = 600
    var grav = 1700
    var newcamhigt = 0
    var hx1 = 0 
    var hx2 = 100
    var ballconter = 0 
    var hx3 = 0
    var gx3 = 0
    var tx = 0 
    var ty = 0
    var ivar = 0
    var los = false
    var xxx = 0
    var yyy = 0
    var c = 0 
    var sprite2 = 0
    volume(0.5)
    scene("map", () => {
        camScale(0.4, 0.4)


        const background = add([
            sprite("Map-Hintergrund"),
            pos(0, 0),
            z(1),
            scale(4),
        ]);       

        function addlvButton(sp, p, f, s) {

            const btn = add([
                sprite(sp),
                pos(p),
                z(2),
                scale(6),
                area({ cursor: "pointer", }),
            ])

            btn.onClick(f)
        }
        addlvButton("eins", vec2(3150, 1000), () => go("Level-1"), )
        addlvButton("zwei", vec2(1200, 900), () => go("Level-2"), )

        //rahmen rahmen
        const rahmen1 = add([
            z(2),
            sprite("rahmen"),
            pos(0, -100),
            scale(4),
        ]);    
        const rahmen2 = add([
            z(2),
            sprite("rahmen"),
            pos(3550, -100),
            scale(4),
        ]);    
        const rahmen3 = add([
            z(2),
            rotate(90),
            sprite("rahmen"),
            pos(2800, -200),
            scale(4),
        ]);    
        const rahmen4 = add([
            z(2),
            rotate(90),
            sprite("rahmen"),
            pos(2800, 2500),
            scale(4),
        ]);    
        const rahmen5 = add([
            z(2),
            rotate(90),
            sprite("rahmen"),
            pos(3750, -200),
            scale(4),
        ]);    
        const rahmen6 = add([
            z(2),
            rotate(90),
            sprite("rahmen"),
            pos(3700, 2500),
            scale(4),
        ]);    
        var mapspeed = 15
        var mapx = 2150
        var mapy = 1210

        onKeyDown("left", () => {
            mapx = mapx - mapspeed
        })

        onKeyDown("right", () => {
            mapx = mapx + mapspeed
        })

        onKeyDown("down", () => {
            mapy = mapy + mapspeed
        })

        onKeyDown("up", () => {
            mapy = mapy - mapspeed
        })

        background.onUpdate(() => {
            camPos(mapx, mapy)
            console.log(mapx, mapy)
        })
    })

    scene("Level-1", () => {
        
        const backgrounds = [
            [0, 172, 70],
        ]
        var punkte = 0
        var Vogel_Timer = 0
        var eins = 1
        var lo = 0 
        var leben = 1 
        var MOVE_SPEED = 4800 //480
        var vogel_da = false
        var yend =  1300
        var jump = 600
        var grav = 1700
        var win = false
        var newcamhigt = 0
        var hx1 = 0 
        var hx2 = 100
        var hx3 = 0
        var gx3 = 0
        var tx = 0 
        var ty = 0
        var ivar = 0
        var pasue = 0 
        onKeyPress("t", () => {
            if (pasue == 0){
                console.log("jajaj")
                pasue = 1 
                MOVE_SPEED = 0
                jump = 0 
                const pausbk = add([
                    sprite("pausbk"),
                    z("1000"),
                    pos(player.pos.x - 500, player.pos.y - 500),
                    "pasue",
                ])
                //buttons
                //play
                const play = add([
                    sprite("play"),
                    z("1001"),
                    scale(3),
                    body({ isStatic: true}),
                    area(),
                    pos(player.pos.x - 15, player.pos.y - 200),
                    "pasue",
                ])
                //quit
                const quit = add([
                    sprite("quit"),
                    z("1001"),
                    area(),
                    body({ isStatic: true}),
                    scale(3),
                    pos(player.pos.x - 15 , player.pos.y - 50 ),
                    "pasue",
                ])
                play.onClick(() => {
                    pasue = 0
                    console.log("neineijn")
                    MOVE_SPEED = 480
                    jump = 600 
                    destroy(pausbk)
                    destroy(quit)
                    destroy(play)
                })

                quit.onClick(() => {
                    go("map")
                })  
            }
        })
        // .clicks() is provided by area() component, it registers an event that runs when the object is clicked

        const music = play("Level-1", {
            loop: true,
        })
        
        camScale(0.8, 0.8)
        setGravity(grav)
        const player = add([
            sprite("player"),
            pos(840, -54),
            area(),
            scale(1),
            body(),
            z(100),
        ])             


            //Polizei //


            const polizei_a = add([
                sprite("polizei_a"),
                pos(0, 130),
                area(), 
                scale(1.3),
                z(103),
            ])
            const schild_sprung = add([
                sprite("schild_sprung"),
                pos(1040, 120),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                scale(3),
                z(101),
            ])
            add([
                sprite("glas-au"),
                pos(2200, 200),
                scale(1),
                z(101),
                area(),
                "glas-au",
            ])
            add([
                sprite("glas-au"),
                pos(2000, 200),
                scale(1),
                z(101),
                area(),
                "glas-au",
            ])
            add([
                sprite("glas-au"),
                pos(2100, 200),
                scale(1),
                z(101),
                area(),
                "glas-au",
            ])
            const straße = add([ 
                sprite("Straße"),
                area(),
                pos(0, 200),
                scale(2),
                body({ isStatic: true }),    
                "straße",
                z(99),
            ])
            const straße2 = add([ 
                sprite("Straße"),
                area(),
                pos(3000, 200),
                scale(2),
                body({ isStatic: true }),    
                "straße2",
                z(99),
            ])
            const straße3 = add([ 
                sprite("Straße"),
                area(),
                pos(10200, 200),
                scale(2),
                body({ isStatic: true }),    
                "straße2",
                z(99),
            ])
            const straße4 = add([ 
                sprite("Straße"),
                area(),
                pos(8400, 200),
                scale(2),
                body({ isStatic: true }),    
                "straße2",
                z(99),
            ])
            const straße5 = add([ 
                sprite("Straße"),
                area(),
                pos(6200, 200),
                scale(2),
                body({ isStatic: true }),    
                "straße2",
                z(99),
            ])
            const Zaun = add([
                sprite("Zaun"),
                area(),
                pos(570, 100),
                scale(6),
                z(50),
                "Zaun",
            ])
            const wand = add([
                sprite("wand"),
                area(),
                pos(630, 54),
                scale(2),
                body({ isStatic: true }),    
                "wand",
                z(999),
            ])           
            const Hause1 = add([
                sprite("Hause1"),
                area(),
                pos(100, -290),
                scale(6),
                "Hause1",
                z(98),
            ])
            add([
                sprite("Papier-mull"),
                pos(400, 80),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                scale(1),
                z(101),
            ])
            add([
                sprite("Wertstoffe"),
                pos(1800, 100),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                scale(1),
                z(101),
            ])
            const Hause2 = add([
                sprite("Hause2"),
                area(),
                pos(970, -255),
                scale(6),
                "Hause2",
                z(97),
            ])
            add([
                sprite("Papier-mull"),
                pos(1400, 100),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                scale(1),
                z(101),
            ])
            const Hause3 = add([
                sprite("Hause3"),
                area(),
                pos(1750, -207),
                scale(6),
                "Hause3",
                z(96),
            ])
            const auto1 = add([
                sprite("car1"),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                pos(3150, 120),
                scale(6),
                "auto1",
                z(210),
            ])
            add([
                sprite("glas-au"),
                pos(3650, 200),
                scale(1),
                z(101),
                area(),
                "glas-au",
            ])
            add([
                sprite("glas-au"),
                pos(3500, 200),
                scale(1),
                z(101),
                area(),
                "glas-au",
            ])
            const auto2 = add([
                sprite("car2"),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                pos(3750, 120),
                scale(6),
                "auto1",
                z(210),
            ])
            const reifen = add([
                sprite("reifen"),
                pos(2300, 160),
                area(), 
                scale(2.5),
                z(103),
                "reifen",
            ])
            const Hause4 = add([
                sprite("Hause4"),
                area(),
                pos(2500, -75),
                scale(6),                
                "Hause4",
                z(95),
            ])
            const Hause5 = add([
                sprite("Hause5"),
                area(),
                pos(3750, -280),
                scale(4),                
                "Hause5",
                z(95),
            ])

            const reifen2 = add([
                sprite("reifen"),
                pos(4200, 160),
                area(), 
                scale(2.5),
                z(103),
                "reifen",
            ])    
            const steine1 = add([
                sprite("steine"),
                pos(4500, 160),
                area(), 
                scale(2.2),
                z(103),
                "glas-au",
            ])          
            const reifen3 = add([
                sprite("reifen"),
                pos(4800, 160),
                area(), 
                scale(2.5),
                z(103),
                "reifen",
            ])    
            const stein2 = add([
                sprite("steine"),
                pos(5100, 160),
                area(), 
                scale(2.2),
                z(103),
                "glas-au",
            ])              
            const reifen4 = add([
                sprite("reifen"),
                pos(5400, 160),
                area(), 
                scale(2.5),
                z(103),
                "reifen",
            ])
            const stein3 = add([
                sprite("steine"),
                pos(5700, 160),
                area(), 
                scale(2.2),
                z(103),
                "glas-au",
            ])
            const reifen5 = add([
                sprite("reifen"),
                pos(6000, 160),
                area(), 
                scale(2.5),
                z(103),
                "reifen",
            ])
            const stein4 = add([
                sprite("steine"),
                pos(6300, 160),
                area(), 
                scale(2.2),
                z(103),
                "glas-au",
            ])       
            const reifen6 = add([
                sprite("reifen"),
                pos(6600, 160),
                area(), 
                scale(2.5),
                z(103),
                "reifen",
            ])
            const Hause6 = add([
                sprite("Hause6"),
                area(),
                pos(5000, -155),
                scale(3.5),                
                "Hause6",
                z(95),
            ])
            const Hause7 = add([
                sprite("Hause7"),
                area(),
                pos(6500, -125),
                scale(3),                
                "Hause7",
                z(95),
            ])
            const Hause8 = add([
                sprite("Hause8"),
                area(),
                pos(8100, -110),
                scale(6),     
                "Hause8",
                z(95),
            ])           
            const Schule = add([
                sprite("Schule"),
                area(),
                pos(10900, -350),
                scale(3.5),     
                "Hause8",
                z(95),
            ])
            const Wertstoffe = add([
                sprite("Wertstoffe"),
                pos(2900, 100),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                scale(1),
                z(101),
            ])
            const Restmull = add([
                sprite("Restmull"),
                pos(2700, 100),
                area(),
                body({ isStatic: true }),
                offscreen({ hide: true }),
                scale(1),
                z(101),
            ])
            
            for (let i = 0; i < 4; i++) {
                var neutei = i * 400
                add([
                    sprite("Papier-mull"),
                    pos(6800 + neutei, 80),
                    area(),
                    body({ isStatic: true }),
                    offscreen({ hide: true }),
                    scale(1),
                    z(101),
                ])
                var neutei2 = neutei - 200
                add([
                    sprite("glas-au"),
                    pos(6800 + neutei2 , 200),
                    scale(1),
                    z(100),
                    area(),
                    "glas-au",
                ])
            }            

           
            polizei_a.play("recht")
            player.play("idle")


            //cam
            player.onCollide("glas-au", () => {
                go("map")
            })  
            
        // onUpdate
            player.onUpdate(() => {        
                //colid
                if(leben == 0){
                    go("map")
                } 
                // bot camera to player
                if(pasue == 0){
                //polizei_a.move(400, 0)
                }
                
                if (player.pos.x < polizei_a.pos.x + 200) {
                    go("map")
                }
                console.log(win)
                if (player.pos.x > 11200) {
                        win = true
                        pasue = 1
                        grav = 0 
                        setGravity(grav)
                        var punkte2 = punkte
                        player.moveTo(player.pos.x - 500, player.pos.y - 600)
                        camPos(player.pos.x - 500, player.pos.y + 1000 )
                        const jjjjo = add([
                            text("Du hast  " + punkte2 * 0.5 + " sekunden gebraucht. "),
                            pos(player.pos.x - 490, player.pos.y + 1000),
                            z(1010),
                            scale(1),
                        ])

                        const quit = add([
                            sprite("quit"),
                            z("1001"),
                            area(),
                            body({ isStatic: true}),
                            scale(3),
                            pos(player.pos.x - 500  , player.pos.y + 1100 ),
                            "pasue",0
                        ])
                        quit.onClick(() => {
                            go("map")
                        })  
                }
                if (win == true) {
                    camPos(player.pos.x - 500, player.pos.y + 1000 )

                }

                if (player.pos.y > yend) {
                    go("map")
                    
                }
                if (!player.isGrounded()) {   
                    if (win == false){             
                    camPos(player.pos.x, player.pos.y - 80)
                        pausbk2.pos.x = player.pos.x - 500
                        pausbk2.pos.y = player.pos.y - 400
                        timer.pos.y = player.pos.y  - 290
                        timer.pos.x = player.pos.x  - 490
                    }
                }


                if (player.isGrounded() && !isKeyDown("left") && !isKeyDown("right")&& !isKeyDown("a") && !isKeyDown("d")) {
                        player.play("idle")
                }
                
                if (!player.isGrounded()) {
                    player.play("jump")
                } 


            })  
            const pausbk2 = add([
                sprite("pausbk"),
                scale(0.1),
                z("1009"),
                pos(player.pos.x - 500, player.pos.y - 400),
                "pasue",
            ])

            player.onCollide("reifen", () => {
                console.log("jo");
                player.jump(950);
            })



            const timer = add([
                text(0),
                pos(player.pos.x - 500, player.pos.y - 400),
                { time: 0 },
                z(1010),
                scale(1),
            ])


            //punkte 
            loop(0.1, () => {
                console.log(pasue)
                if (pasue == 0) {
                    punkte = punkte + 1
                    timer.time = punkte
                    timer.text = timer.time
                }
            })
            //Vogel
            Vogel_Timer = rand(10, 20)
                loop(Vogel_Timer, () => {
                    const vx = player.pos.x + 1000
                    const vy = rand(-200, -250)
                    vogel_da = true 

                    const vogel = add([
                        sprite("Vogel"),
                        pos(vx, -300),
                        z(3),
                        area(),
                        scale(6),
                        "vogel",
                    ])
                    
                    loop(0.1,() => {
                        vogel.move(-MOVE_SPEED * 3, 0)
                    })

                    wait(1, () => {
                        vogel.play("fly")
                    })
                    
                    wait(24, () => {
                        destroy(vogel)
                    })
                    
                })
            //Grass / Baum Gen 

            for (let i = 0; i < 40; i++) {
                
                add([
                    sprite("Grass"),
                    pos(gx3, 150),
                    z(1),
                    area(),
                    scale(1),
                ])
                ivar = rand(1, 2)
                for (let i = 0; i < ivar; i++) {
                    tx = rand(gx3 - 170, gx3 + 170)
                    ty = rand(-20, -35)
                    add([
                        sprite("Tanebaum"),
                        pos(tx, ty),
                        z(2),
                        area(),
                        scale(2.4),
                    ])
                }
                gx3 = gx3 + 341
            }
            // Himmel 
            for (let i = 0; i < 20; i++) {

                add([
                    sprite("Himmel"),
                    pos(hx3, -700),
                    z(1),
                    area(),
                    scale(6),
                ])
                hx1 = hx3 + 350
                hx2 = hx3 - 350
                
                for (let i = 0; i < 3; i++) {


                    const wx1 = rand(hx1, hx2)
                    const wy1 = rand(-200, -350)
                    
                    add([
                        sprite("Wolken"),
                        scale(6),
                        z(2),
                        pos(wx1, wy1),
                    ])
                    
                    
                }

                hx3 = hx3 + 600
            }
        // Input
                onKeyPress("space", () => {
                    if(pasue == 0){
                        if (player.isGrounded()) {     
                            
                            player.jump(jump);
                            camPos(player.pos.x, player.pos.y - 80)
                            pausbk2.pos.x = player.pos.x - 500
                    pausbk2.pos.y = player.pos.y - 400
                    timer.pos.y = player.pos.y  - 290
                    timer.pos.x = player.pos.x  - 490
                        }
                    }
                })
                onKeyPress("up", () => {
                    if(pasue == 0){
                        if (player.isGrounded()) {                
                            player.jump(jump);
                            camPos(player.pos.x, player.pos.y - 80)
                            pausbk2.pos.x = player.pos.x - 500
                    pausbk2.pos.y = player.pos.y - 400
                    timer.pos.y = player.pos.y  - 290
                    timer.pos.x = player.pos.x  - 490
                        }
                    }
                })
                onKeyPress("w", () => {
                    if(pasue == 0){
                        if (player.isGrounded()) {                
                            player.jump(jump);
                            camPos(player.pos.x, player.pos.y - 80)
                            pausbk2.pos.x = player.pos.x - 500
                    pausbk2.pos.y = player.pos.y - 400
                    timer.pos.y = player.pos.y  - 290
                    timer.pos.x = player.pos.x  - 490
                        }
                    }
                })  
                     
            //Links
                onKeyDown("a", () => {
                    if (win == false){             

                            player.move(-MOVE_SPEED, 0)
                            camPos(player.pos.x, player.pos.y - 80)
                            pausbk2.pos.x = player.pos.x - 500
                            pausbk2.pos.y = player.pos.y - 400
                            timer.pos.y = player.pos.y  - 290
                            timer.pos.x = player.pos.x  - 490
                            player.flipX = true
                            //Animation
                            if (player.isGrounded() && player.curAnim() !== "run") {
                                player.play("run")
                            }
                    } 
                })
            //Rechts
                onKeyDown("d", () => {
                    if (win == false){             

                        player.move(MOVE_SPEED, 0)
                        camPos(player.pos.x, player.pos.y - 80)
                        pausbk2.pos.x = player.pos.x - 500
                        pausbk2.pos.y = player.pos.y - 400
                        timer.pos.y = player.pos.y  - 290
                        timer.pos.x = player.pos.x  - 490
                        player.flipX = false
                        //Animation
                        if (player.isGrounded() && player.curAnim() !== "run") {
                            player.play("run")
                        }
                    }
                })

    })
    
    scene("Level-2", () => {
        c = 2
        xx =  0 
        var tuhe = false
        var los = false
        jump = 700 
        MOVE_SPEED = 4800
        sprite2 = 0 
        var ballconter = 500  
        var pasue = 0 
        onKeyPress("t", () => {
            if (pasue == 0){
                console.log("jajaj")
                pasue = 1 
                MOVE_SPEED = 0
                jump = 0 
                const pausbk = add([
                    sprite("pausbk"),
                    z("1000"),
                    pos(player.pos.x - 500, player.pos.y - 500),
                    "pasue",
                ])
                //buttons
                //play
                const play = add([
                    sprite("play"),
                    z("1001"),
                    scale(3),
                    body({ isStatic: true}),
                    area(),
                    pos(player.pos.x, 200),
                    "pasue",
                ])
                //quit
                const quit = add([
                    sprite("quit"),
                    z("1001"),
                    area(),
                    body({ isStatic: true}),
                    scale(3),
                    pos(player.pos.x, 360 ),
                    "pasue",
                ])
                play.onClick(() => {
                    pasue = 0
                    console.log("neineijn")
                    MOVE_SPEED = 480
                    jump = 700 
                    destroy(pausbk)
                    destroy(quit)
                    destroy(play)
                })

                quit.onClick(() => {
                    go("map")
                })  
            }
        })
        //backround loder 
        camScale(1, 1)
        setGravity(grav)
        camPos(0, 260)
        //setGravity(grav)
        const player = add([
            sprite("player"),
            pos(0, 100),
            area(),
            scale(1),
            body(),
            z(100),
        ])         
          
        player.onCollide("ball3", () => {
            go("map")
        }) 
        player.onCollide("ball2", () => {
            go("map")
        }) 
        player.onCollide("ball1", () => {
            go("map")
        })
        player.onCollide("wand", () => {
            stop = true
        })  
        player.onCollide("Sprungbret", () => {
            console.log("jo");
            player.jump(900);
        })
        player.onCollide("Sprungbret2", () => {
            console.log("jo");
            player.jump(900);
        })
            const Bock = add([
                sprite("Bock"),
                pos(3300, 400),
                area(),
                body({ isStatic: true }),
                scale(1),
                z(50),
            ])

            const Bock2 = add([
                sprite("Bock"),
                pos(3300, 300),
                area(),
                body({ isStatic: true }),
                scale(1), // 3200
                z(50),
            ])
        //on update 
        player.onUpdate(() => {        
                //colid
                if (los == true){
                midi.move(MOVE_SPEED * 0.6, 0) 
                }
                if (!player.isGrounded()) {                
                    camPos(player.pos.x, 260)
                }

        
                if (player.isGrounded() && !isKeyDown("left") && !isKeyDown("right")&& !isKeyDown("a") && !isKeyDown("d")) {
                    player.play("idle")
                }
                
                if (!player.isGrounded()) {
                    player.play("jump")
                } 
                
                if (player.isGrounded() && !isKeyDown("left") && !isKeyDown("right")&& !isKeyDown("a") && !isKeyDown("d")) {
                        player.play("idle")
                }
            })
        // bock / sprugbret
        var bock = 1
        for (let i = 0; i < 8; i++) {
            const Bock = add([
                sprite("Bock"),
                pos(400 * bock, 400),
                area(),
                body({ isStatic: true }),
                scale(1),
                z(50),
            ])

            const Bock2 = add([
                sprite("Bock"),
                pos(400 * bock, 300),
                area(),
                body({ isStatic: true }),
                scale(1), // 3200
                z(50),
            ])
             bock = bock + 1
        }
            const Sprungbret = add([
                sprite("Sprungbret"),
                pos(260, 480),
                area(),
                scale(1),
                body({ isStatic: true}),
                z(100),
                "Sprungbret",
            ]) 
            const wand  = add([
                sprite("wand"),
                pos(3500, 300),
                area(),
                scale(2),
                body({ isStatic: true}),
                z(100),
                "wand",
            ])

        //bk gen 
        for (let i = 0; i < 40; i++) {
                add([
                    sprite("level2bk"),
                    scale(4),
                    z(3),
                    pos(xx, -10),
                ])
                add([
                    sprite("boden"),
                    area(),
                    body({ isStatic: true }), 
                    scale(4),
                    z(5),
                    pos(xx, 500)
                ])
                xx = xx + 400 
        }
        wait(2, () => {
            loop(3, () => {
                if (stop == false) {
                    yyy = rand(480, 450)
                    sprite2 = rand(1, 3)
                    var sprite2 = Math.round(sprite2);
                    xxx = player.pos.x + 700 

                        if(sprite2 == 1) {
                            const ball3 = add([
                                sprite("1"),
                                scale(1),
                                z(3),
                                pos(xxx, yyy),
                                "ball3",
                                move(LEFT, ballconter),
                                area(),
                                ballconter = ballconter + 5
                            ])
                            wait(4, () => {
                                destroy(ball3)
                            })
                        }

                        if(sprite2 == 2) {
                            const ball2 = add([
                                sprite("2"),
                                area(),
                                scale(1),
                                z(3),
                                pos(xxx, yyy),
                                "ball2",
                                move(LEFT, 800),
                            ])
                            wait(4, () => {
                                destroy(ball2)
                            })

                            ballconter = ballconter + 5

                        }
                        if(sprite2 == 3) {
                            const ball1 = add([
                                sprite("3"),
                                area(),
                                scale(1),
                                z(3),
                                pos(xxx, yyy),
                                "ball1",
                                move(LEFT, 800),
                            ])
                            wait(4, () => {
                                destroy(ball1)
                            })

                            ballconter = ballconter + 5
                        }
                }



            })
        })

        // Input
            //Jump
                onKeyPress("space", () => {
                    if (player.isGrounded()) {     
                        player.jump(jump);
                    }
                })
                onKeyPress("up", () => {
                    if (player.isGrounded()) {                
                        player.jump(jump); 
                    }
                })
                onKeyPress("w", () => {
                    if (player.isGrounded()) {                
                        player.jump(jump);
                    }
                })              
            //Links
                onKeyDown("a", () => {
                    player.move(-MOVE_SPEED, 0)
                    camPos(player.pos.x, 260)
                    player.flipX = true
                    //Animation
                    if (player.isGrounded() && player.curAnim() !== "run") {
                        player.play("run")
                    }
                })
            //Rechts
                onKeyDown("d", () => {
                    player.move(MOVE_SPEED, 0)
                    camPos(player.pos.x, 260)
                    player.flipX = false
                    //Animation
                    if (player.isGrounded() && player.curAnim() !== "run") {
                        player.play("run")
                    }
                })
                //input
            const midi = add([
                sprite("midi"),
                pos(3800, 400),
                area(),
                body(),
                scale(3),
                z(50),
                "midi",
            ])
            
            player.onCollide("midi", (e, col) => {
                // if it's not from the top, die
                if (!col.isBottom()) {
                    go("map")
                }
                    los = true
                    midi.play("spin")
            })

            const halder = add([
                sprite("halder"),
                pos(4300, 250),
                scale(3),
                z(49),
                
            ])

            const bigboden = add([
                sprite("bodenbig"),
                pos(4200, 240),
                area(),
                body( { isStatic: true}),
                scale(3),
                z(50),
            ])
            var hallo = 0

            for (let i = 0; i < 6; i++) {
                
                hallo = hallo + 600
                
                const halder2 = add([
                    sprite("halder"),
                    pos(5000 + hallo, 250),
                    scale(3),
                    z(49),
                    
                ])

                const bigboden2 = add([
                    sprite("bodenbig"),
                    pos(4900 + hallo, 240),
                    area(),
                    body( { isStatic: true}),
                    scale(3),
                    z(50),
                ])
            }

            for (let i = 0; i < 12; i++) {
                
                hallo = hallo + 270
                
                const halder2 = add([
                    sprite("halder"),
                    pos(5500 + hallo, 250),
                    scale(3),
                    z(49),
                    
                ])

                const smallboden2 = add([
                    sprite("bodensmall"),
                    pos(5490 + hallo, 240),
                    area(),
                    body( { isStatic: true}),
                    scale(3),
                    z(50),
                ])
            }
            for (let i = 0; i < 3; i++) {
                
                
            const halder2 = add([
                sprite("halder"),
                pos(13500, 300 * i),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])       
            }
            const halder5 = add([
                sprite("halder"),
                pos(13800, 0),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const halder6 = add([
                sprite("halder"),
                pos(14100, 100),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const halder7 = add([
                sprite("halder"),
                pos(14100, 300),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const halder8 = add([
                sprite("halder"),
                pos(14025, 300),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const halder9 = add([
                sprite("halder"),
                pos(13980, 300),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            midi.onCollide("Sprungbret2", (e, col) => {
                // if it's not from the top, die
                destroy(midi)
            })

            const halder3 = add([
                sprite("halder"),
                pos(13200, 0),
                scale(3),
                z(49),    
                area(),
                body( { isStatic: true } ),               
            ])
            const halder4 = add([
                sprite("halder"),
                pos(13200, 500),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const Sprungbret2 = add([
                sprite("Sprungbret"),
                pos(13340, 400),
                area(),
                scale(2),
                body(),
                z(100),
                "Sprungbret2",
            ]) 
            const Sprungbret3 = add([
                sprite("Sprungbret"),
                pos(13300, 100),
                area(),
                rotate(90),
                scale(2),
                z(100),
                "Sprungbret2",
            ]) 
            const Sprungbret4 = add([
                sprite("Sprungbret"),
                pos(13800, 400),
                area(),
                scale(2),
                body(),
                z(100),
                "Sprungbret2",
            ])  
            const Sprungbret5 = add([
                sprite("Sprungbret"),
                pos(13960, 270),
                area(),
                scale(1.5),
                z(100),
                "Sprungbret2",
            ])
    
            //Boss Level:
                var time = 10
                var boss = false
                //1500, 100
            const timer = add([
                text(0),
                pos(15000, 100),
                { timeer: 0 },
                z(1010),
                scale(3),
            ])
            //update 
            player.onUpdate(() => {  
                if(player.pos.x > 14500){
                    if (wand2.pos.y == 300){
                        boss = true
                        console.log(boss)
                    }else{
                        wand2.moveTo(wand2.pos.x, 300) 
                        time = 11
                        timer.text = timer.timeer
                    }
                }
                if (time == 0) {
                    tuhe = true
                }
            })
            //wände
            const wand1 = add([
                sprite("halder"),
                pos(14400, 0),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const wand2 = add([
                sprite("halder"),
                pos(14400, 0),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            const wand3 = add([
                sprite("halder"),
                pos(14400, -300),
                scale(3),
                area(),
                body( { isStatic: true } ),
                z(49),                   
            ])
            //punkte 
            loop(1, () => {
                console.log(pasue)
                if (pasue == 0) {
                    if(boss == true){
                        time = time - 1
                        timer.timeer = time
                        timer.text = timer.timeer
                    } 
                }
            })
    
    
    
    })
    go("map");
    </script>
</body>
</html>
